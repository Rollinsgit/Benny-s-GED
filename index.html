<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benny's Center Stage</title>
    <style>
        :root { --math: #300018; --rla: #150030; --sci: #001b30; --ss: #302000; }
        body { font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 50px; transition: background 0.6s ease; background: var(--math); color: white; }
        .status-header { background: rgba(0,0,0,0.9); padding: 20px; text-align: center; border-bottom: 2px solid #ff007a; position: sticky; top: 0; z-index: 100; }
        .progress-outer { background: #333; border-radius: 20px; height: 18px; margin: 10px auto; max-width: 400px; overflow: hidden; }
        .bar { background: linear-gradient(90deg, #ff007a, #7000ff); height: 100%; width: 0%; transition: 0.8s; }
        .sync-badge { font-size: 0.7rem; color: #00ff88; margin-top: 5px; letter-spacing: 1px; }
        .button-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; max-width: 600px; margin: 0 auto; }
        .sub-btn { padding: 15px; border: none; border-radius: 50px; color: white; font-weight: bold; cursor: pointer; border: 1px solid rgba(255,255,255,0.2); }
        .btn-math { background: #ff007a; } .btn-rla { background: #7000ff; } .btn-sci { background: #00d4ff; } .btn-ss { background: #ffcc00; }
        .container { max-width: 600px; margin: 0 auto; padding: 0 15px; }
        .content { display: none; } .content.active { display: block; }
        .lesson-card { background: rgba(255,255,255,0.1); margin-bottom: 12px; padding: 15px; border-radius: 15px; display: flex; align-items: center; justify-content: space-between; backdrop-filter: blur(10px); }
        .lesson-info { display: flex; align-items: center; gap: 15px; flex-grow: 1; cursor: pointer; }
        
        input[type="checkbox"] { 
            appearance: none; -webkit-appearance: none; width: 35px; height: 35px; 
            border: 3px solid #555; border-radius: 10px; background: rgba(0,0,0,0.3); cursor: pointer; 
            position: relative; flex-shrink: 0; margin: 0;
        }
        input[type="checkbox"]:checked { background: #00ff88; border-color: #00cc6a; }
        input[type="checkbox"]:checked::after { content: '✔'; position: absolute; color: black; font-size: 22px; left: 6px; top: -1px; }
        .lesson-card span { font-size: 0.95rem; font-weight: 500; }
        .learn-link { background: rgba(255,255,255,0.1); border: none; border-radius: 50%; width: 45px; height: 45px; color: white; font-size: 1.3rem; cursor: pointer; }
    </style>
</head>
<body id="body-bg">

<div class="status-header" id="status-bar">
    <h2 id="header-title" style="margin:0; font-size: 1.1rem;">BENNY: TECHNIQUE (MATH)</h2>
    <div class="progress-outer"><div id="p-bar" class="bar"></div></div>
    <div id="stat-text" style="font-size: 0.8rem; opacity: 0.8;">0/22 mastered</div>
    <div class="sync-badge">LIVE CLOUD CONNECTION</div>
</div>

<div class="button-grid">
    <button class="sub-btn btn-math" onclick="switchSubject('math')">TECHNIQUE</button>
    <button class="sub-btn btn-rla" onclick="switchSubject('rla')">LYRICS</button>
    <button class="sub-btn btn-sci" onclick="switchSubject('sci')">ENERGY</button>
    <button class="sub-btn btn-ss" onclick="switchSubject('ss')">HISTORY</button>
</div>

<div class="container">
    <div id="math-list" class="content active"></div>
    <div id="rla-list" class="content"></div>
    <div id="sci-list" class="content"></div>
    <div id="ss-list" class="content"></div>
</div>

<script>
    const FIREBASE_URL = 'https://schooling-dashboard-default-rtdb.firebaseio.com/benny';
    const subColors = { math: "#ff007a", rla: "#7000ff", sci: "#00d4ff", ss: "#ffcc00" };
    const dataSet = { /* ... same data as Mitchell ... */ };

    let activeSub = 'math';

    function init() {
        Object.keys(dataSet).forEach(sub => {
            const list = document.getElementById(sub + '-list');
            dataSet[sub].forEach((text, i) => {
                const id = `b_${sub}_${i}`;
                const card = document.createElement('div');
                card.className = 'lesson-card';
                card.innerHTML = `
                    <div class="lesson-info" onclick="toggleCheckbox('${id}')">
                        <input type="checkbox" id="${id}" onclick="event.stopPropagation(); saveToCloud();">
                        <span>Routine ${i+1}: ${text}</span>
                    </div>
                    <button class="learn-link" onclick="copyAndOpen('GED ${sub.toUpperCase()} ${text}')">✨</button>`;
                list.appendChild(card);
            });
        });
        loadFromCloud();
        setInterval(loadFromCloud, 5000);
    }

    function toggleCheckbox(id) {
        const cb = document.getElementById(id);
        cb.checked = !cb.checked;
        saveToCloud();
    }

    function saveToCloud() {
        const data = {};
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => { data[cb.id] = cb.checked; });
        fetch(`${FIREBASE_URL}/checks.json`, { method: 'PUT', body: JSON.stringify(data) }).then(() => updateUI());
    }

    function loadFromCloud() {
        fetch(`${FIREBASE_URL}/checks.json`)
            .then(r => r.json())
            .then(data => {
                if (data) {
                    Object.entries(data).forEach(([id, checked]) => {
                        const el = document.getElementById(id);
                        if (el) el.checked = checked;
                    });
                }
                updateUI();
            });
    }

    function switchSubject(sub) {
        activeSub = sub;
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.getElementById(sub + '-list').classList.add('active');
        document.getElementById('body-bg').style.background = `var(--${sub})`;
        document.getElementById('status-bar').style.borderBottomColor = subColors[sub];
        updateUI();
    }

    function updateUI() {
        const currentList = document.getElementById(activeSub + '-list');
        const total = currentList.querySelectorAll('input').length;
        const checked = currentList.querySelectorAll('input:checked').length;
        const pct = Math.round((checked / total) * 100) || 0;
        document.getElementById('p-bar').style.width = pct + '%';
        document.getElementById('stat-text').innerText = `${checked}/${total} mastered (${pct}%)`;
    }

    function copyAndOpen(phrase) {
        const el = document.createElement('textarea'); el.value = phrase; document.body.appendChild(el);
        el.select(); document.execCommand('copy'); document.body.removeChild(el);
        window.open("https://learning.google.com/experiments/learn-about", "_blank");
    }

    init();
</script>
</body>
</html>
