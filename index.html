<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Benny's GED Master Hub</title>
    <style>
        :root { --math: #667eea; --rla: #ff5e62; --sci: #27ae60; --ss: #f39c12; --bg: #f4f7f6; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
        body { background: var(--bg); color: #333; padding-bottom: 60px; }
        
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

        .hero { background: var(--math); color: white; padding: 40px 20px; text-align: center; border-radius: 0 0 30px 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 30px; transition: 0.5s; }
        .progress-container { margin: 20px auto 0; background: rgba(255,255,255,0.2); border-radius: 20px; height: 14px; overflow: hidden; max-width: 600px; }
        #progress-bar { background: #fff; width: 0%; height: 100%; transition: width 0.5s; opacity: 0.9; }
        
        .tabs { display: flex; overflow-x: auto; gap: 8px; margin-top: -25px; margin-bottom: 20px; padding: 5px; scrollbar-width: none; justify-content: center; }
        .tab-btn { padding: 10px 18px; border: none; border-radius: 12px; background: white; font-weight: bold; color: #888; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.1); white-space: nowrap; font-size: 0.8rem; }
        
        .tab-btn.active { color: white; }
        .active-math { background: var(--math) !important; }
        .active-rla { background: var(--rla) !important; }
        .active-sci { background: var(--sci) !important; }
        .active-ss { background: var(--ss) !important; }

        .module-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        @media (min-width: 768px) { .module-grid { grid-template-columns: 1fr 1fr; } }

        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); height: fit-content; }
        .module-title { font-size: 1.1rem; margin-bottom: 15px; border-bottom: 2px solid #f0f0f0; padding-bottom: 8px; }
        
        .lesson-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f9f9f9; }
        .lesson-info h4 { font-size: 0.9rem; }
        
        input[type="checkbox"] { width: 24px; height: 24px; cursor: pointer; accent-color: var(--success); }
    </style>
</head>
<body>

    <div class="hero" id="header">
        <div class="container">
            <h1 id="mainTitle">Math Mission</h1>
            <div class="progress-container"><div id="progress-bar"></div></div>
            <p style="font-size: 0.9rem; margin-top: 10px;"><span id="done-count">0</span> Lessons Completed</p>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active active-math" id="mathBtn" onclick="switchSubject('math')">MATH</button>
        <button class="tab-btn" id="rlaBtn" onclick="switchSubject('rla')">RLA</button>
        <button class="tab-btn" id="sciBtn" onclick="switchSubject('sci')">SCIENCE</button>
        <button class="tab-btn" id="ssBtn" onclick="switchSubject('ss')">SOC STUDIES</button>
    </div>

    <div class="container">
        <div id="mathGrid" class="module-grid content-group">
            <div class="card">
                <h3 class="module-title" style="color:var(--math)">Foundations</h3>
                <div class="lesson-row"><h4>Place Value</h4><input type="checkbox" id="m1" class="ged-check"></div>
                <div class="lesson-row"><h4>Fractions Basics</h4><input type="checkbox" id="m2" class="ged-check"></div>
                <div class="lesson-row"><h4>Decimals & Percent</h4><input type="checkbox" id="m3" class="ged-check"></div>
            </div>
        </div>

        <div id="rlaGrid" class="module-grid content-group" style="display:none;">
            <div class="card">
                <h3 class="module-title" style="color:var(--rla)">Reading Skills</h3>
                <div class="lesson-row"><h4>Main Ideas</h4><input type="checkbox" id="r1" class="ged-check"></div>
                <div class="lesson-row"><h4>Context Clues</h4><input type="checkbox" id="r2" class="ged-check"></div>
                <div class="lesson-row"><h4>The Essay (ER)</h4><input type="checkbox" id="r3" class="ged-check"></div>
            </div>
        </div>

        <div id="sciGrid" class="module-grid content-group" style="display:none;">
            <div class="card">
                <h3 class="module-title" style="color:var(--sci)">Life & Physical</h3>
                <div class="lesson-row"><h4>Cell Biology</h4><input type="checkbox" id="s1" class="ged-check"></div>
                <div class="lesson-row"><h4>Genetics</h4><input type="checkbox" id="s2" class="ged-check"></div>
                <div class="lesson-row"><h4>Chemical Bonding</h4><input type="checkbox" id="s3" class="ged-check"></div>
            </div>
        </div>

        <div id="ssGrid" class="module-grid content-group" style="display:none;">
            <div class="card">
                <h3 class="module-title" style="color:var(--ss)">1. Civics & Govt</h3>
                <div class="lesson-row"><h4>Types of Government</h4><input type="checkbox" id="ss1" class="ged-check"></div>
                <div class="lesson-row"><h4>US Constitution</h4><input type="checkbox" id="ss2" class="ged-check"></div>
                <div class="lesson-row"><h4>Branches of Govt</h4><input type="checkbox" id="ss3" class="ged-check"></div>
                <div class="lesson-row"><h4>Electoral College</h4><input type="checkbox" id="ss4" class="ged-check"></div>
            </div>
            <div class="card">
                <h3 class="module-title" style="color:var(--ss)">2. History & Econ</h3>
                <div class="lesson-row"><h4>Revolutionary War</h4><input type="checkbox" id="ss5" class="ged-check"></div>
                <div class="lesson-row"><h4>The Civil War</h4><input type="checkbox" id="ss6" class="ged-check"></div>
                <div class="lesson-row"><h4>World Wars</h4><input type="checkbox" id="ss7" class="ged-check"></div>
                <div class="lesson-row"><h4>Supply & Demand</h4><input type="checkbox" id="ss8" class="ged-check"></div>
            </div>
        </div>
    </div>

    <script>
        const FIREBASE_URL = 'https://schooling-dashboard-default-rtdb.firebaseio.com';

        function switchSubject(type) {
            document.querySelectorAll('.content-group').forEach(g => g.style.display = 'none');
            document.querySelectorAll('.tab-btn').forEach(b => b.className = 'tab-btn');
            const header = document.getElementById('header');
            const title = document.getElementById('mainTitle');

            if(type === 'math') {
                document.getElementById('mathGrid').style.display = 'grid';
                document.getElementById('mathBtn').className = 'tab-btn active active-math';
                header.style.background = 'var(--math)'; title.innerText = 'Math Mission';
            } else if(type === 'rla') {
                document.getElementById('rlaGrid').style.display = 'grid';
                document.getElementById('rlaBtn').className = 'tab-btn active active-rla';
                header.style.background = 'var(--rla)'; title.innerText = 'RLA Mastery';
            } else if(type === 'sci') {
                document.getElementById('sciGrid').style.display = 'grid';
                document.getElementById('sciBtn').className = 'tab-btn active active-sci';
                header.style.background = 'var(--sci)'; title.innerText = 'Science Discovery';
            } else if(type === 'ss') {
                document.getElementById('ssGrid').style.display = 'grid';
                document.getElementById('ssBtn').className = 'tab-btn active active-ss';
                header.style.background = 'var(--ss)'; title.innerText = 'Social Studies';
            }
            updateUI();
        }

        function updateUI() {
            const all = document.querySelectorAll('.ged-check').length;
            const checked = document.querySelectorAll('.ged-check:checked').length;
            document.getElementById('progress-bar').style.width = (checked/all*100) + "%";
            document.getElementById('done-count').textContent = checked;
        }

        function save() {
            const d = {}; document.querySelectorAll('.ged-check').forEach(c => d[c.id] = c.checked);
            fetch(FIREBASE_URL + '/master_sync.json', { method: 'PUT', body: JSON.stringify(d) });
            updateUI();
        }

        function load() {
            fetch(FIREBASE_URL + '/master_sync.json').then(r => r.json()).then(data => {
                if (data) Object.entries(data).forEach(([id, val]) => {
                    const el = document.getElementById(id); if (el) el.checked = val;
                });
                updateUI();
            });
        }

        setInterval(load, 3000);
        window.onload = () => { load(); document.querySelectorAll('.ged-check').forEach(c => c.addEventListener('change', save)); };
    </script>
</body>
</html>
