<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Benny's GED Hub</title>
    <style>
        :root { --primary: #667eea; --secondary: #764ba2; --success: #27ae60; --bg: #f4f7f6; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
        body { background: var(--bg); color: #333; padding-bottom: 50px; }
        
        /* Top Hero Section */
        .hero { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 30px 20px; text-align: center; border-radius: 0 0 30px 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .progress-container { margin-top: 20px; background: rgba(255,255,255,0.2); border-radius: 20px; height: 12px; overflow: hidden; }
        #progress-bar { background: var(--success); width: 12.5%; height: 100%; transition: width 0.5s; }
        
        /* Sync Badge */
        .sync-badge { font-size: 0.7rem; margin-top: 10px; display: inline-block; padding: 5px 12px; border-radius: 15px; background: rgba(0,0,0,0.3); }
        .online { color: #2ecc71; }

        /* Modern Tabs */
        .tabs { display: flex; justify-content: space-around; background: white; margin: -25px 20px 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 5px; }
        .tab-btn { padding: 12px; border: none; background: none; font-weight: 700; color: #999; flex: 1; cursor: pointer; }
        .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); }

        /* Lesson Cards */
        .content { display: none; padding: 0 20px; }
        .content.active { display: block; }
        .card { background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .lesson-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }
        .lesson-row:last-child { border: none; }
        .lesson-info h4 { font-size: 0.95rem; }
        .lesson-info p { font-size: 0.75rem; color: #888; }
        
        /* Checkbox Styling */
        input[type="checkbox"] { width: 24px; height: 24px; accent-color: var(--success); }
        
        .current-tag { background: #f1c40f; color: black; font-size: 0.6rem; padding: 2px 6px; border-radius: 4px; margin-left: 8px; vertical-align: middle; }
    </style>
</head>
<body>

    <div class="hero">
        <h1>Sprint to 145</h1>
        <p>GED Math Tracker</p>
        <div class="progress-container"><div id="progress-bar"></div></div>
        <p style="font-size: 0.8rem; margin-top: 8px;"><span id="done-count">3</span>/24 Lessons Complete</p>
        <div class="sync-badge" id="syncBadge">● Checking Cloud Sync...</div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('math', this)">MATH</button>
        <button class="tab-btn" onclick="switchTab('plan', this)">PLAN</button>
        <button class="tab-btn" onclick="switchTab('settings', this)">SYNC</button>
    </div>

    <div id="math" class="content active">
        <div class="card">
            <h3 style="color:var(--primary); margin-bottom:10px;">Module 1: Foundations</h3>
            <div class="lesson-row">
                <div class="lesson-info"><h4>1. Place Value</h4><p>Rounding & Whole Numbers</p></div>
                <input type="checkbox" id="m1" class="ged-check">
            </div>
            <div class="lesson-row">
                <div class="lesson-info"><h4>2. Fractions Basics</h4><p>Adding & Subtracting</p></div>
                <input type="checkbox" id="m2" class="ged-check">
            </div>
            <div class="lesson-row">
                <div class="lesson-info"><h4>3. Decimals <span class="current-tag">CURRENT</span></h4><p>Conversions & Money</p></div>
                <input type="checkbox" id="m3" class="ged-check">
            </div>
            <div class="lesson-row">
                <div class="lesson-info"><h4>4. Percents</h4><p>Ratios & Proportions</p></div>
                <input type="checkbox" id="m4" class="ged-check">
            </div>
        </div>
        
        <div class="card">
            <h3 style="color:var(--primary); margin-bottom:10px;">Module 2: Geometry</h3>
            <div class="lesson-row">
                <div class="lesson-info"><h4>5. Area & Perimeter</h4><p>GED Formula Sheet Move</p></div>
                <input type="checkbox" id="m5" class="ged-check">
            </div>
        </div>
    </div>

    <div id="plan" class="content">
        <div class="card">
            <h3>Daily Routine</h3>
            <p style="font-size: 0.9rem; color: #666;">9:30 AM — Start Morning Math</p>
            <hr style="margin: 10px 0; opacity: 0.2;">
            <p style="font-size: 0.9rem; color: #666;">12:10 PM — RLA & Typing Club</p>
        </div>
    </div>

    <div id="settings" class="content">
        <div class="card">
            <h3>Cloud Settings</h3>
            <p style="font-size: 0.8rem;">Database: schooling-dashboard-default-rtdb</p>
            <button onclick="location.reload()" style="margin-top:15px; padding:10px; width:100%; border-radius:10px; border:1px solid #ddd; background:white;">Force Sync Refresh</button>
        </div>
    </div>

    <script>
        const FIREBASE_URL = 'https://schooling-dashboard-default-rtdb.firebaseio.com';

        function switchTab(tabId, btn) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            btn.classList.add('active');
        }

        function updateProgressBar() {
            const total = document.querySelectorAll('.ged-check').length;
            const checked = document.querySelectorAll('.ged-check:checked').length;
            const pct = (checked / total) * 100;
            document.getElementById('progress-bar').style.width = pct + "%";
            document.getElementById('done-count').textContent = checked;
        }

        function saveCheckboxes() {
            const data = {};
            document.querySelectorAll('.ged-check').forEach(cb => data[cb.id] = cb.checked);
            fetch(FIREBASE_URL + '/checks.json', {
                method: 'PUT',
                body: JSON.stringify(data)
            });
            updateProgressBar();
        }

        function loadCheckboxes() {
            fetch(FIREBASE_URL + '/checks.json')
                .then(r => r.json())
                .then(data => {
                    if (data) {
                        Object.entries(data).forEach(([id, checked]) => {
                            const el = document.getElementById(id);
                            if (el) el.checked = checked;
                        });
                        updateProgressBar();
                        document.getElementById('syncBadge').innerHTML = "● <span class='online'>Live Cloud Sync Active</span>";
                    }
                });
        }

        setInterval(loadCheckboxes, 3000);
        window.onload = () => {
            loadCheckboxes();
            document.querySelectorAll('.ged-check').forEach(cb => cb.addEventListener('change', saveCheckboxes));
        };
    </script>
</body>
</html>
